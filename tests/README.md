# 测试文件夹

这个文件夹包含了所有与测试相关的脚本和工具。

## 文件说明

### 测试脚本

- **`test_client.py`** - 主要的测试客户端
  - 提供完整的交互式测试界面
  - 支持对话管理、聊天测试等功能
  - 包含所有 Agent API 接口的测试

- **`test_config.py`** - 配置测试脚本
  - 测试配置文件加载功能
  - 验证环境变量和配置文件的优先级
  - 配置验证和错误处理测试

- **`simple_test.py`** - 简单测试脚本
  - 基础的 API 连接测试
  - 快速验证服务是否正常运行
  - 适合自动化测试和 CI/CD

- **`debug_api.py`** - API 调试工具
  - 专门用于调试 Agent API 接口
  - 详细的错误信息和响应分析
  - 支持不同参数组合的测试

## 使用方法

### 1. 运行主测试客户端
```bash
cd tests
python test_client.py
```

### 2. 测试配置功能
```bash
cd tests
python test_config.py
```

### 3. 快速连接测试
```bash
cd tests
python simple_test.py
```

### 4. API 调试
```bash
cd tests
python debug_api.py
```

## 测试前准备

1. **确保服务运行**：
   ```bash
   # 在项目根目录启动服务
   python main.py
   ```

2. **配置文件**：
   确保 `config.local.yaml` 已正确配置

3. **依赖安装**：
   ```bash
   pip install -r requirements.txt
   ```

## 测试功能

### 基础功能测试
- ✅ API 连接测试
- ✅ 配置加载测试
- ✅ 认证功能测试

### 聊天功能测试
- ✅ 创建对话测试
- ✅ 流式聊天测试
- ✅ 非流式聊天测试
- ✅ 会话管理测试

### 管理功能测试
- ✅ 对话列表获取
- ✅ 对话重命名
- ✅ 对话删除
- ✅ 消息历史查看

### 高级功能测试
- ✅ 重新生成回答
- ✅ 反馈评价
- ✅ 提问建议
- ✅ 应用配置获取

## 自动化测试

可以创建自动化测试脚本：

```bash
# 运行所有测试
python -m pytest tests/

# 运行特定测试
python tests/simple_test.py
```

## 故障排除

### 常见问题

1. **导入错误**：
   - 确保在项目根目录运行测试
   - 检查 Python 路径设置

2. **连接失败**：
   - 确认服务已启动
   - 检查端口配置

3. **配置错误**：
   - 验证 `config.local.yaml` 文件
   - 检查环境变量设置

### 调试建议

1. 使用 `debug_api.py` 进行详细调试
2. 查看服务端日志
3. 检查网络连接状态
4. 验证 API 密钥和权限

## 扩展测试

可以根据需要添加更多测试：

- 性能测试
- 压力测试
- 集成测试
- 单元测试

每个测试文件都应该包含详细的文档和使用说明。 
